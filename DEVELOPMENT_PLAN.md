# å›¾ç‰‡å¤„ç†ç½‘ç«™å¼€å‘è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°
ä¸€ä¸ªé›†æˆå¤šç§ AI åŠŸèƒ½çš„å›¾ç‰‡å¤„ç†ç½‘ç«™ï¼ŒåŒ…å«å›¾ç‰‡å‹ç¼©ã€æŠ å›¾å»èƒŒæ™¯ã€å›¾ç‰‡è¯†åˆ«å’Œ AI ç”Ÿå›¾å››å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 18 + TypeScript + Vite + Tailwind CSS
- **åç«¯**: Express.js + Node.jsï¼ˆAPI ä»£ç†æœåŠ¡å™¨ï¼‰
- **API æœåŠ¡**:
  - Remove.bg APIï¼ˆå»èƒŒæ™¯ï¼‰
  - ç«å±±å¼•æ“å¤šæ¨¡æ€ APIï¼ˆå›¾ç‰‡è¯†åˆ«ï¼‰
  - ç«å±±å¼•æ“å›¾åƒç”Ÿæˆ APIï¼ˆAI ç”Ÿå›¾ï¼‰

---

## å¼€å‘é˜¶æ®µ

### âœ… é˜¶æ®µé›¶ï¼šç¯å¢ƒå‡†å¤‡ï¼ˆå·²å®Œæˆï¼‰
- [x] åˆ›å»ºåç«¯ä»£ç†æœåŠ¡ï¼ˆExpress + Node.jsï¼‰
- [x] é…ç½® `.env.local` å­˜å‚¨ API Keys
  - Remove.bg API Key: `3R5g4sc8mdFN2Ztzx4giq2Wx`
  - ç«å±±å¼•æ“ API Key: `a59df6c7-06b3-478e-a699-dd7e0a9bcd43`
- [x] è®¾ç½® CORS å’Œä»£ç†è·¯ç”±
  - `/api/remove-bg` - å»èƒŒæ™¯æ¥å£
  - `/api/recognize` - å›¾ç‰‡è¯†åˆ«æ¥å£
  - `/api/generate-image` - AI ç”Ÿå›¾æ¥å£
- [x] æµ‹è¯•åç«¯æœåŠ¡å™¨å¯åŠ¨
- [x] Git ç‰ˆæœ¬ç®¡ç†å¹¶æ¨é€

**åç«¯æœåŠ¡å™¨åœ°å€**: `http://localhost:3001`

---

### ğŸ”„ é˜¶æ®µä¸€ï¼šå›¾ç‰‡å‹ç¼©åŠŸèƒ½
**çŠ¶æ€**: å·²å®ç°ï¼Œå¾…éªŒè¯

**ç°æœ‰å®ç°**:
- ä½¿ç”¨ `browser-image-compression` åº“
- çº¯å‰ç«¯å‹ç¼©ï¼Œæ— éœ€è°ƒç”¨åç«¯ API
- æ”¯æŒè´¨é‡è°ƒèŠ‚ï¼ˆ10%-100%ï¼‰
- æ˜¾ç¤ºå‹ç¼©å‰åå¯¹æ¯”å’Œæ–‡ä»¶å¤§å°

**å¾…å®Œæˆä»»åŠ¡**:
1. [ ] æµ‹è¯•å›¾ç‰‡å‹ç¼©åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
2. [ ] éªŒè¯å‹ç¼©è´¨é‡å’Œä¸‹è½½åŠŸèƒ½
3. [ ] å¦‚æœ‰é—®é¢˜åˆ™ä¿®å¤
4. [ ] åŠŸèƒ½ç¡®è®¤æ— è¯¯å Git commit + push

**æ–‡ä»¶è·¯å¾„**: `src/pages/Compress.tsx`

---

### ğŸ“ é˜¶æ®µäºŒï¼šæŠ å›¾å»èƒŒæ™¯åŠŸèƒ½
**çŠ¶æ€**: å¾…å¼€å‘

**éœ€æ±‚**:
- ä¸Šä¼ å›¾ç‰‡
- è°ƒç”¨ Remove.bg API å»é™¤èƒŒæ™¯
- æ˜¾ç¤ºåŸå›¾å’Œå¤„ç†åå¯¹æ¯”
- ä¸‹è½½é€æ˜èƒŒæ™¯å›¾ç‰‡

**å¼€å‘æ­¥éª¤**:
1. [ ] ä¿®æ”¹ `RemoveBg.tsx` ç»„ä»¶
   - ç§»é™¤ `@imgly/background-removal` ä¾èµ–
   - æ·»åŠ å›¾ç‰‡è½¬ base64 åŠŸèƒ½
   - è°ƒç”¨åç«¯ `/api/remove-bg` æ¥å£
2. [ ] å®ç°å‰åç«¯æ•°æ®äº¤äº’
   - å‰ç«¯å‘é€ base64 å›¾ç‰‡æ•°æ®
   - åç«¯è°ƒç”¨ Remove.bg API
   - è¿”å›å¤„ç†åçš„å›¾ç‰‡
3. [ ] ä¼˜åŒ– UI å’Œé”™è¯¯å¤„ç†
   - åŠ è½½çŠ¶æ€æç¤º
   - é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
   - é€æ˜èƒŒæ™¯æ£‹ç›˜æ ¼é¢„è§ˆ
4. [ ] æµ‹è¯•å®Œæ•´æµç¨‹
5. [ ] Git commit + push

**API è¯·æ±‚æ ¼å¼**:
```bash
curl -H 'X-API-Key: 3R5g4sc8mdFN2Ztzx4giq2Wx' \
     -F 'image_file_b64=BASE64_STRING' \
     -F 'size=auto' \
     -f https://api.remove.bg/v1.0/removebg
```

**æ–‡ä»¶è·¯å¾„**: `src/pages/RemoveBg.tsx`

---

### ğŸ“ é˜¶æ®µä¸‰ï¼šå›¾ç‰‡è¯†åˆ«åŠŸèƒ½
**çŠ¶æ€**: å¾…å¼€å‘

**éœ€æ±‚**:
- ä¸Šä¼ å›¾ç‰‡
- è°ƒç”¨ç«å±±å¼•æ“å¤šæ¨¡æ€ API è¯†åˆ«å›¾ç‰‡å†…å®¹
- æ˜¾ç¤ºè¯†åˆ«ç»“æœï¼ˆç‰©ä½“ã€åœºæ™¯ã€æ–‡å­—ç­‰ï¼‰

**å¼€å‘æ­¥éª¤**:
1. [ ] ä¿®æ”¹ `Recognize.tsx` ç»„ä»¶
   - ç§»é™¤ `Tesseract.js` ä¾èµ–
   - æ·»åŠ å›¾ç‰‡è½¬ base64 åŠŸèƒ½ï¼ˆå¸¦æ ¼å¼å‰ç¼€ï¼‰
   - è°ƒç”¨åç«¯ `/api/recognize` æ¥å£
2. [ ] å®ç°å‰åç«¯æ•°æ®äº¤äº’
   - å‰ç«¯å‘é€ base64 å›¾ç‰‡ï¼ˆæ ¼å¼ï¼š`data:image/png;base64,xxx`ï¼‰
   - åç«¯è°ƒç”¨ç«å±±å¼•æ“ API
   - è¿”å› AI è¯†åˆ«çš„æ–‡å­—æè¿°
3. [ ] ä¼˜åŒ– UI å±•ç¤º
   - å·¦ä¾§æ˜¾ç¤ºåŸå›¾
   - å³ä¾§æ˜¾ç¤ºè¯†åˆ«ç»“æœ
   - æ”¯æŒå¤åˆ¶è¯†åˆ«æ–‡æœ¬
4. [ ] æµ‹è¯•å®Œæ•´æµç¨‹
5. [ ] Git commit + push

**API è¯·æ±‚æ ¼å¼**:
```bash
curl --location 'https://ark.cn-beijing.volces.com/api/v3/chat/completions' \
--header 'Authorization: Bearer $ARK_API_KEY' \
--header 'Content-Type: application/json' \
--data '{
  "model": "ep-20250921140145-v9tg9",
  "messages": [{
    "role": "user",
    "content": [
      {"type": "text", "text": "è¯†åˆ«å›¾ç‰‡"},
      {"type": "image_url", "image_url": {"url": "data:image/png;base64,{base64}"}}
    ]
  }]
}'
```

**æ–‡ä»¶è·¯å¾„**: `src/pages/Recognize.tsx`

---

### ğŸ“ é˜¶æ®µå››ï¼šAI ç”Ÿå›¾åŠŸèƒ½
**çŠ¶æ€**: å¾…å¼€å‘

**éœ€æ±‚**:
- ç”¨æˆ·è¾“å…¥æ–‡å­—æç¤ºè¯ï¼ˆpromptï¼‰
- è°ƒç”¨ç«å±±å¼•æ“å›¾åƒç”Ÿæˆ API
- æ˜¾ç¤ºç”Ÿæˆçš„å›¾ç‰‡
- æ”¯æŒä¸‹è½½

**å¼€å‘æ­¥éª¤**:
1. [ ] ä¿®æ”¹ `AIGenerate.tsx` ç»„ä»¶
   - ç§»é™¤ Unsplash å ä½ä»£ç 
   - æ·»åŠ æç¤ºè¯è¾“å…¥æ¡†ï¼ˆæ”¯æŒå¤šè¡Œæ–‡æœ¬ï¼‰
   - è°ƒç”¨åç«¯ `/api/generate-image` æ¥å£
2. [ ] å®ç°å‰åç«¯æ•°æ®äº¤äº’
   - å‰ç«¯å‘é€ç”¨æˆ·è¾“å…¥çš„ prompt
   - åç«¯è°ƒç”¨ç«å±±å¼•æ“ API
   - è¿”å›ç”Ÿæˆå›¾ç‰‡çš„ URL
3. [ ] ä¼˜åŒ– UI å’ŒåŠŸèƒ½
   - æç¤ºè¯è¾“å…¥æ¡†ï¼ˆtextareaï¼‰
   - ç”ŸæˆæŒ‰é’®å’ŒåŠ è½½çŠ¶æ€
   - æ˜¾ç¤ºç”Ÿæˆçš„å›¾ç‰‡
   - ä¸‹è½½åŠŸèƒ½
4. [ ] æ·»åŠ ç¤ºä¾‹æç¤ºè¯ï¼ˆå¯é€‰ï¼‰
5. [ ] æµ‹è¯•å®Œæ•´æµç¨‹
6. [ ] Git commit + push

**API è¯·æ±‚æ ¼å¼**:
```bash
curl -X POST https://ark.cn-beijing.volces.com/api/v3/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $ARK_API_KEY" \
  -d '{
    "model": "ep-20250922151247-nzclw",
    "prompt": "ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯",
    "sequential_image_generation": "disabled",
    "response_format": "url",
    "size": "2K",
    "stream": false,
    "watermark": true
  }'
```

**æ–‡ä»¶è·¯å¾„**: `src/pages/AIGenerate.tsx`

---

## Git ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

æ¯ä¸ªé˜¶æ®µå®Œæˆåéƒ½è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼š

1. **é˜¶æ®µé›¶**: âœ… `feat: setup backend proxy server for API integration`
2. **é˜¶æ®µä¸€**: `feat: verify and optimize image compression feature`
3. **é˜¶æ®µäºŒ**: `feat: integrate remove.bg API for background removal`
4. **é˜¶æ®µä¸‰**: `feat: integrate Volcano Engine API for image recognition`
5. **é˜¶æ®µå››**: `feat: integrate Volcano Engine API for AI image generation`

---

## å¼€å‘æ³¨æ„äº‹é¡¹

### å‰åç«¯é€šä¿¡
- å‰ç«¯åœ°å€: `http://localhost:5179` (Vite)
- åç«¯åœ°å€: `http://localhost:3001` (Express)
- åç«¯å·²é…ç½® CORSï¼Œå‰ç«¯å¯ç›´æ¥è°ƒç”¨

### å›¾ç‰‡æ ¼å¼å¤„ç†
- **Remove.bg**: æ¥æ”¶ base64ï¼ˆæ— å‰ç¼€ï¼‰ï¼Œè¿”å› PNG
- **ç«å±±å¼•æ“è¯†åˆ«**: æ¥æ”¶å¸¦å‰ç¼€çš„ base64ï¼ˆ`data:image/png;base64,xxx`ï¼‰
- **ç«å±±å¼•æ“ç”Ÿå›¾**: è¿”å›å›¾ç‰‡ URL

### é”™è¯¯å¤„ç†
- æ‰€æœ‰ API è°ƒç”¨éƒ½è¦æœ‰ try-catch
- æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤ºç»™ç”¨æˆ·
- åœ¨æ§åˆ¶å°è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯

### ç¯å¢ƒå˜é‡å®‰å…¨
- `.env.local` å·²åœ¨ `.gitignore` ä¸­ï¼ˆ`*.local`ï¼‰
- API Key ä¸ä¼šè¢«æäº¤åˆ° Git
- ç”Ÿäº§ç¯å¢ƒéœ€è¦å•ç‹¬é…ç½®ç¯å¢ƒå˜é‡

---

## å½“å‰è¿›åº¦

- [x] é˜¶æ®µé›¶ï¼šç¯å¢ƒå‡†å¤‡
- [ ] é˜¶æ®µä¸€ï¼šå›¾ç‰‡å‹ç¼©éªŒè¯
- [ ] é˜¶æ®µäºŒï¼šæŠ å›¾å»èƒŒæ™¯
- [ ] é˜¶æ®µä¸‰ï¼šå›¾ç‰‡è¯†åˆ«
- [ ] é˜¶æ®µå››ï¼šAI ç”Ÿå›¾

**æœ€åæ›´æ–°**: 2025-10-02
